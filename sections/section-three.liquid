<style>

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

<div class="tab">
  {% for block in section.blocks %}
  <button class="tablinks" onclick="openCity(event, 'block-{{ forloop.index }}')">{{ block.settings.collection.title }}</button>
  {% endfor %}
</div>

{% for block in section.blocks %}
<div id="block-{{ forloop.index }}" class="tabcontent">
  {%- for product in block.settings.collection.products limit: block.settings.products_to_show -%}
    {% render 'card-product',
      card_product: product,
      media_aspect_ratio: block.settings.image_ratio,
      show_secondary_image: block.settings.show_secondary_image,
      show_vendor: block.settings.show_vendor,
      show_rating: block.settings.show_rating,
      show_quick_add: block.settings.enable_quick_add,
      section_id: block.id
    %}
  {% endfor %}
</div>
{% endfor %}

{% schema %}
{
  "name": "section-three",
  "settings": [],
  "blocks":[
    {
      "type": "column",
      "name":"column images text",
      "limit":3,
      "settings": [
        {
            "type": "collection",
            "id": "collection",
            "label": "Tab Category"
        },
        {
            "type": "range",
            "id": "products_to_show",
            "min": 2,
            "max": 12,
            "step": 1,
            "default": 4,
            "label": "Product limit"
        },
        {
          "type": "select",
          "id": "image_ratio",
          "options": [
            {
              "value": "adapt",
              "label": "t:sections.featured-collection.settings.image_ratio.options__1.label"
            },
            {
              "value": "portrait",
              "label": "t:sections.featured-collection.settings.image_ratio.options__2.label"
            },
            {
              "value": "square",
              "label": "t:sections.featured-collection.settings.image_ratio.options__3.label"
            }
          ],
          "default": "adapt",
          "label": "t:sections.featured-collection.settings.image_ratio.label"
        },
        {
          "type": "checkbox",
          "id": "show_secondary_image",
          "default": false,
          "label": "t:sections.featured-collection.settings.show_secondary_image.label"
        },
        {
          "type": "checkbox",
          "id": "show_vendor",
          "default": false,
          "label": "t:sections.featured-collection.settings.show_vendor.label"
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "default": false,
          "label": "t:sections.featured-collection.settings.show_rating.label",
          "info": "t:sections.featured-collection.settings.show_rating.info"
        },
        {
          "type": "checkbox",
          "id": "enable_quick_add",
          "default": false,
          "label": "t:sections.featured-collection.settings.enable_quick_buy.label"
        }
      ]
    }
  ],
  "presets": [
  {
    "name": "section-t",
    "blocks": [
      {
        "type": "column"
      }
    ]
  }
]
}
{% endschema %}

<script>
function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>